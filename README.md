# Разработка системы поддержки принятия решений кредитования малого и среднего бизнеса

Интеллектуальная система анализа кредитоспособности предприятий малого и среднего бизнеса.  
Проект разработан в рамках курсовой работы по дисциплине «Системы искусственного интеллекта».

---

## Описание

Система представляет собой гибридный подход к оценке кредитных рисков, объединяющий:

- **Машинное обучение (ML)** — модель RandomForest, обученная на реальных финансовых данных, предсказывает вероятность дефолта.
- **Экспертная система (База знаний)** — правила проверки финансовых нормативов для объяснения причин отказа или снижения рейтинга.
- **NLP-анализ** — анализ текстового описания бизнеса для выявления скрытых рисков (тональность текста).

---

## Технологии

- **Backend:** Python 3.9+, FastAPI  
- **Database:** SQLite (SQLAlchemy ORM)  
- **ML:** Scikit-learn, Pandas, NumPy, Joblib  
- **Frontend:** HTML, CSS, Jinja2  
- **NLP:** Регулярные выражения, словарный анализ тональности  

---

## Структура проекта

```
credit_ai_system/
├── app/
│   ├── api/           # Роутеры (Auth, Views, Admin)
│   ├── core/          # Утилиты и зависимости
│   ├── models/        # Модели БД и Pydantic схемы
│   ├── services/      # Бизнес-логика (Analysis, ML, KB)
│   ├── templates/     # HTML шаблоны
│   └── main.py        # Точка входа
├── dataset_.csv        # Исходный датасет (ARFF/CSV)
├── final_dataset.csv   # Обработанный датасет для обучения
├── train_model.py      # Скрипт обучения модели
├── convert_data.py     # Скрипт конвертации данных
├── requirements.txt    # Зависимости
└── README.md
```

---

## Установка и запуск

### 1. Клонирование репозитория

```bash
git clone https://github.com/VoOneChek/sme-credit-risk-ai.git
```
```bash
cd credit_ai_system
```

---

### 2. Создание виртуального окружения

```bash
python -m venv .venv
```

Активация (Windows PowerShell):

```bash
.\.venv\Scripts\Activate.ps1
```

Для Linux/Mac:

```bash
source .venv/bin/activate
```

---

### 3. Установка зависимостей

```bash
pip install -r requirements.txt
```

Важно: для корректной работы хеширования паролей установите совместимую версию bcrypt:

```bash
pip install bcrypt==4.0.1
```

---

### 4. Подготовка данных (опционально)

Если вы используете исходный датасет в формате ARFF (файл dataset_.csv), запустите скрипт конвертации:

```bash
python convert_data.py
```

Будет создан файл final_dataset.csv.

---

### 5. Обучение модели

Перед первым запуском приложения необходимо обучить модель (или обновить её на новых данных):

```bash
python train_model.py
```

После успешного обучения появится файл:

```
credit_model.pkl
```

---

### 6. Запуск сервера

```bash
python -m app.main
```

После запуска приложение будет доступно по адресу:

```
http://127.0.0.1:8000
```

---

## Использование

При первом запуске автоматически создаётся администратор:

- **Логин:** `admin`
- **Пароль:** `admin`

---

## Функционал

**Главная страница:**
- Ввод финансовых данных вручную
- Загрузка файлов (PDF / CSV)

**Личный кабинет:**
- История поданных заявок
- Детализация выявленных рисков

**Админ-панель:**
- Управление пользователями
- Редактирование базы знаний (правил рисков)
- Переобучение модели на новых данных из БД
- Скачивание системных логов
